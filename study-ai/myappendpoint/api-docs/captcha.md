
# CaptchaController API对接文档

## 1. 获取验证码图片

### 请求信息
- **URL**: `/captcha`
- **方法**: `GET`
- **描述**: 生成并获取验证码图片，同时将验证码文本存储到缓存中

### 请求参数
| 参数名 | 类型 | 必需 | 默认值 | 描述 |
|--------|------|------|--------|------|
| requestId | string | 是 | 无 | 唯一请求ID，用于标识验证码请求 |

### 响应格式
- 响应类型: `image/jpeg`
- 响应内容: 验证码图片的二进制数据

### 请求示例
```bash
# 获取验证码图片
curl -X GET 'http://localhost:8080/captcha?requestId=123456'
```

## 2. 验证验证码 (内部方法)

> 注意：这是一个内部方法，不是REST API端点

### 方法信息
- **方法名**: `validateCaptcha`
- **描述**: 验证用户输入的验证码是否正确

### 参数说明
| 参数名 | 类型 | 必需 | 描述 |
|--------|------|------|------|
| requestId | string | 是 | 唯一请求ID，用于标识验证码请求 |
| captcha | string | 是 | 用户输入的验证码 |

### 返回值
- 类型: `boolean`
- 描述: 验证结果，`true`表示验证通过，`false`表示验证失败

## 3. 获取验证码 (内部方法)

> 注意：这是一个内部方法，不是REST API端点

### 方法信息
- **方法名**: `getCaptcha`
- **描述**: 根据请求ID获取验证码信息

### 参数说明
| 参数名 | 类型 | 必需 | 描述 |
|--------|------|------|------|
| requestId | string | 是 | 唯一请求ID，用于标识验证码请求 |

### 返回值
- 类型: `CaptchaInfo`
- 描述: 验证码信息对象

## 4. 获取邮箱验证码 (内部方法)

> 注意：这是一个内部方法，不是REST API端点

### 方法信息
- **方法名**: `getMailCaptcha`
- **描述**: 获取邮箱验证码

### 参数说明
| 参数名 | 类型 | 必需 | 描述 |
|--------|------|------|------|
| requestId | string | 是 | 唯一请求ID，用于标识验证码请求 |

### 返回值
- 类型: `CaptchaInfo`
- 描述: 邮箱验证码信息对象

## 5. 缓存邮箱验证码 (内部方法)

> 注意：这是一个内部方法，不是REST API端点

### 方法信息
- **方法名**: `cacheMailCaptcha`
- **描述**: 缓存邮箱验证码

### 参数说明
| 参数名 | 类型 | 必需 | 描述 |
|--------|------|------|------|
| requestId | string | 是 | 唯一请求ID，用于标识验证码请求 |
| captcha | string | 是 | 邮箱验证码 |

## 数据结构说明

### CaptchaInfo 对象
| 字段名 | 类型 | 描述 |
|--------|------|------|
| captcha | string | 验证码文本 |
| createTime | long | 创建时间戳 |
| expireTime | long | 过期时间戳 |
| requestId | string | 请求ID |
EOF
